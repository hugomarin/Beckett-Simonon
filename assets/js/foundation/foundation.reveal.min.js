(function(t,e,i,s){"use strict";Foundation.libs.reveal={name:"reveal",version:"4.0.9",locked:false,settings:{animation:"fadeAndPop",animationSpeed:250,closeOnBackgroundClick:true,dismissModalClass:"close-reveal-modal",bgClass:"reveal-modal-bg",open:function(){},opened:function(){},close:function(){},closed:function(){},bg:t(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}},init:function(e,i,s){this.scope=e||this.scope;Foundation.inherit(this,"data_options delay");if(typeof i==="object"){t.extend(true,this.settings,i)}if(typeof i!="string"){this.events();return this.settings.init}else{return this[i].call(this,s)}},events:function(){var e=this;t(this.scope).off(".fndtn.reveal").on("click.fndtn.reveal","[data-reveal-id]",function(i){i.preventDefault();if(!e.locked){e.locked=true;e.open.call(e,t(this))}}).on("click.fndtn.reveal touchend.click.fndtn.reveal",this.close_targets(),function(i){i.preventDefault();if(!e.locked){e.locked=true;e.close.call(e,t(this).closest(".reveal-modal"))}}).on("open.fndtn.reveal",".reveal-modal",this.settings.open).on("opened.fndtn.reveal",".reveal-modal",this.settings.opened).on("opened.fndtn.reveal",".reveal-modal",this.open_video).on("close.fndtn.reveal",".reveal-modal",this.settings.close).on("closed.fndtn.reveal",".reveal-modal",this.settings.closed).on("closed.fndtn.reveal",".reveal-modal",this.close_video);return true},open:function(e){if(e){var i=t("#"+e.data("reveal-id"))}else{var i=t(this.scope)}if(!i.hasClass("open")){var s=t(".reveal-modal.open");if(typeof i.data("css-top")==="undefined"){i.data("css-top",parseInt(i.css("top"),10)).data("offset",this.cache_offset(i))}i.trigger("open");if(s.length<1){this.toggle_bg(i)}this.hide(s,this.settings.css.open);this.show(i,this.settings.css.open)}},close:function(e){var e=e||t(this.scope),i=t(".reveal-modal.open");if(i.length>0){this.locked=true;e.trigger("close");this.toggle_bg(e);this.hide(i,this.settings.css.close)}},close_targets:function(){var t="."+this.settings.dismissModalClass;if(this.settings.closeOnBackgroundClick){return t+", ."+this.settings.bgClass}return t},toggle_bg:function(e){if(t(".reveal-modal-bg").length===0){this.settings.bg=t("<div />",{"class":this.settings.bgClass}).insertAfter(e)}if(this.settings.bg.filter(":visible").length>0){this.hide(this.settings.bg)}else{this.show(this.settings.bg)}},show:function(i,s){if(s){if(/pop/i.test(this.settings.animation)){s.top=t(e).scrollTop()-i.data("offset")+"px";var n={top:t(e).scrollTop()+i.data("css-top")+"px",opacity:1};return this.delay(function(){return i.css(s).animate(n,this.settings.animationSpeed,"linear",function(){this.locked=false;i.trigger("opened")}.bind(this)).addClass("open")}.bind(this),this.settings.animationSpeed/2)}if(/fade/i.test(this.settings.animation)){var n={opacity:1};return this.delay(function(){return i.css(s).animate(n,this.settings.animationSpeed,"linear",function(){this.locked=false;i.trigger("opened")}.bind(this)).addClass("open")}.bind(this),this.settings.animationSpeed/2)}return i.css(s).show().css({opacity:1}).addClass("open").trigger("opened")}if(/fade/i.test(this.settings.animation)){return i.fadeIn(this.settings.animationSpeed/2)}return i.show()},hide:function(i,s){if(s){if(/pop/i.test(this.settings.animation)){var n={top:-t(e).scrollTop()-i.data("offset")+"px",opacity:0};return this.delay(function(){return i.animate(n,this.settings.animationSpeed,"linear",function(){this.locked=false;i.css(s).trigger("closed")}.bind(this)).removeClass("open")}.bind(this),this.settings.animationSpeed/2)}if(/fade/i.test(this.settings.animation)){var n={opacity:0};return this.delay(function(){return i.animate(n,this.settings.animationSpeed,"linear",function(){this.locked=false;i.css(s).trigger("closed")}.bind(this)).removeClass("open")}.bind(this),this.settings.animationSpeed/2)}return i.hide().css(s).removeClass("open").trigger("closed")}if(/fade/i.test(this.settings.animation)){return i.fadeOut(this.settings.animationSpeed/2)}return i.hide()},close_video:function(e){var i=t(this).find(".flex-video"),s=i.find("iframe");if(s.length>0){s.attr("data-src",s[0].src);s.attr("src","about:blank");i.fadeOut(100).hide()}},open_video:function(e){var i=t(this).find(".flex-video"),s=i.find("iframe");if(s.length>0){var n=s.attr("data-src");if(typeof n==="string"){s[0].src=s.attr("data-src")}i.show().fadeIn(100)}},cache_offset:function(t){var e=t.show().height()+parseInt(t.css("top"),10);t.hide();return e},off:function(){t(this.scope).off(".fndtn.reveal")}}})(Foundation.zj,this,this.document);