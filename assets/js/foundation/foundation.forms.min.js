(function(s,e,t,i){"use strict";Foundation.libs.forms={name:"forms",version:"4.0.4",settings:{disable_class:"no-custom"},init:function(e,t,i){this.scope=e||this.scope;if(typeof t==="object"){s.extend(true,this.settings,t)}if(typeof t!="string"){if(!this.settings.init){this.events()}this.assemble();return this.settings.init}else{return this[t].call(this,i)}},assemble:function(){s('form.custom input[type="radio"]',s(this.scope)).not('[data-customforms="disabled"]').each(this.append_custom_markup);s('form.custom input[type="checkbox"]',s(this.scope)).not('[data-customforms="disabled"]').each(this.append_custom_markup);s("form.custom select",s(this.scope)).not('[data-customforms="disabled"]').each(this.append_custom_select)},events:function(){var e=this;s(this.scope).on("change.fndtn.forms",'form.custom select:not([data-customforms="disabled"])',function(t){e.refresh_custom_select(s(this))}).on("click.fndtn.forms","form.custom label",function(t){var i=s("#"+e.escape(s(this).attr("for"))+':not([data-customforms="disabled"])'),n,o;if(i.length!==0){if(i.attr("type")==="checkbox"){t.preventDefault();n=s(this).find("span.custom.checkbox");if(n.length==0){n=s(this).siblings("span.custom.checkbox").first()}e.toggle_checkbox(n)}else if(i.attr("type")==="radio"){t.preventDefault();o=s(this).find("span.custom.radio");if(o.length==0){o=s(this).siblings("span.custom.radio").first()}e.toggle_radio(o)}}}).on("click.fndtn.forms","form.custom div.custom.dropdown a.current, form.custom div.custom.dropdown a.selector",function(t){var i=s(this),n=i.closest("div.custom.dropdown"),o=n.prev();if(!n.hasClass("open"))s(e.scope).trigger("click");t.preventDefault();if(false===o.is(":disabled")){n.toggleClass("open");if(n.hasClass("open")){s(e.scope).on("click.fndtn.forms.customdropdown",function(){n.removeClass("open");s(e.scope).off(".fndtn.forms.customdropdown")})}else{s(e.scope).on(".fndtn.forms.customdropdown")}return false}}).on("click.fndtn.forms touchend.fndtn.forms","form.custom div.custom.dropdown li",function(e){var t=s(this),i=t.closest("div.custom.dropdown"),n=i.prev(),o=0;e.preventDefault();e.stopPropagation();if(!s(this).hasClass("disabled")){s("div.dropdown").not(i).removeClass("open");var a=t.closest("ul").find("li.selected");a.removeClass("selected");t.addClass("selected");i.removeClass("open").find("a.current").html(t.html());t.closest("ul").find("li").each(function(s){if(t[0]==this){o=s}});n[0].selectedIndex=o;n.data("prevalue",a.html());n.trigger("change")}});this.settings.init=true},append_custom_markup:function(e,t){var i=s(t).hide(),n=i.attr("type"),o=i.next("span.custom."+n);if(o.length===0){o=s('<span class="custom '+n+'"></span>').insertAfter(i)}o.toggleClass("checked",i.is(":checked"));o.toggleClass("disabled",i.is(":disabled"))},append_custom_select:function(e,t){var i=Foundation.libs.forms,n=s(t),o=n.next("div.custom.dropdown"),a=o.find("ul"),d=o.find(".current"),l=o.find(".selector"),c=n.find("option"),r=c.filter(":selected"),f=n.attr("class")?n.attr("class").split(" "):[],h=0,u="",m,p=false;if(n.hasClass(i.settings.disable_class))return;if(o.length===0){var g=n.hasClass("small")?"small":n.hasClass("medium")?"medium":n.hasClass("large")?"large":n.hasClass("expand")?"expand":"";o=s('<div class="'+["custom","dropdown",g].concat(f).filter(function(s,e,t){if(s=="")return false;return t.indexOf(s)==e}).join(" ")+'"><a href="#" class="selector"></a><ul /></div>');l=o.find(".selector");a=o.find("ul");u=c.map(function(){return"<li>"+s(this).html()+"</li>"}).get().join("");a.append(u);p=o.prepend('<a href="#" class="current">'+r.html()+"</a>").find(".current");n.after(o).hide()}else{u=c.map(function(){return"<li>"+s(this).html()+"</li>"}).get().join("");a.html("").append(u)}o.toggleClass("disabled",n.is(":disabled"));m=a.find("li");c.each(function(e){if(this.selected){m.eq(e).addClass("selected");if(p){p.html(s(this).html())}}if(s(this).is(":disabled")){m.eq(e).addClass("disabled")}});if(!o.is(".small, .medium, .large, .expand")){o.addClass("open");var i=Foundation.libs.forms;i.hidden_fix.adjust(a);h=i.outerWidth(m)>h?i.outerWidth(m):h;Foundation.libs.forms.hidden_fix.reset();o.removeClass("open")}},refresh_custom_select:function(e){var t=this;var i=0,n=e.next(),o=e.find("option");n.find("ul").html("");o.each(function(){var e=s("<li>"+s(this).html()+"</li>");n.find("ul").append(e)});o.each(function(e){if(this.selected){n.find("li").eq(e).addClass("selected");n.find(".current").html(s(this).html())}if(s(this).is(":disabled")){n.find("li").eq(e).addClass("disabled")}});n.removeAttr("style").find("ul").removeAttr("style");n.find("li").each(function(){n.addClass("open");if(t.outerWidth(s(this))>i){i=t.outerWidth(s(this))}n.removeClass("open")})},toggle_checkbox:function(s){var e=s.prev(),t=e[0];if(false===e.is(":disabled")){t.checked=t.checked?false:true;s.toggleClass("checked");e.trigger("change")}},toggle_radio:function(s){var e=s.prev(),t=e.closest("form.custom"),i=e[0];if(false===e.is(":disabled")){t.find('input[type="radio"][name="'+this.escape(e.attr("name"))+'"]').next().not(s).removeClass("checked");if(!s.hasClass("checked")){s.toggleClass("checked")}i.checked=s.hasClass("checked");e.trigger("change")}},escape:function(s){return s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},hidden_fix:{tmp:[],hidden:null,adjust:function(e){var t=this;t.hidden=e.parents().andSelf().filter(":hidden");t.hidden.each(function(){var e=s(this);t.tmp.push(e.attr("style"));e.css({visibility:"hidden",display:"block"})})},reset:function(){var e=this;e.hidden.each(function(t){var n=s(this),o=e.tmp[t];if(o===i)n.removeAttr("style");else n.attr("style",o)});e.tmp=[];e.hidden=null}},off:function(){s(this.scope).off(".fndtn.forms")}}})(Foundation.zj,this,this.document);