(function(t,i,e,s){"use strict";Foundation.libs.section={name:"section",version:"4.0.9",settings:{deep_linking:false,one_up:true,callback:function(){}},init:function(t,i,e){var s=this;this.scope=t||this.scope;Foundation.inherit(this,"throttle data_options");if(typeof i!="string"){this.set_active_from_hash();this.events();return true}else{return this[i].call(this,e)}},events:function(){var s=this;t(this.scope).on("click.fndtn.section","[data-section] .title",function(i){var e=t(this),n=e.closest("[data-section]");s.toggle_active.call(this,i,s)});t(i).on("resize.fndtn.section",s.throttle(function(){s.resize.call(this)},30)).on("hashchange",function(){if(!s.settings.toggled){s.set_active_from_hash();t(this).trigger("resize")}}).trigger("resize");t(e).on("click.fndtn.section",function(i){if(t(i.target).closest(".title").length<1){t('[data-section="vertical-nav"], [data-section="horizontal-nav"]').find("section, .section").removeClass("active").attr("style","")}})},toggle_active:function(i,e){var s=t(this),n=s.closest("section, .section"),o=n.find(".content"),a=n.closest("[data-section]"),e=Foundation.libs.section,c=t.extend({},e.settings,e.data_options(a));e.settings.toggled=true;if(!c.deep_linking&&o.length>0){i.preventDefault()}if(n.hasClass("active")){if(e.small(a)||e.is_vertical(a)||e.is_horizontal(a)||e.is_accordion(a)){n.removeClass("active").attr("style","")}}else{var l=null,r=e.outerHeight(n.find(".title"));if(e.small(a)||c.one_up){l=s.closest("[data-section]").find("section.active, .section.active");if(e.small(a)){l.attr("style","")}else{l.attr("style","visibility: hidden; padding-top: "+r+"px;")}}if(e.small(a)){n.attr("style","")}else{n.css("padding-top",r)}n.addClass("active");if(l!==null){l.removeClass("active").attr("style","")}}setTimeout(function(){e.settings.toggled=false},300);c.callback()},resize:function(){var i=t("[data-section]"),e=Foundation.libs.section;i.each(function(){var i=t(this),s=i.find("section.active, .section.active"),n=t.extend({},e.settings,e.data_options(i));if(s.length>1){s.not(":first").removeClass("active").attr("style","")}else if(s.length<1&&!e.is_vertical(i)&&!e.is_horizontal(i)&&!e.is_accordion(i)){var o=i.find("section, .section").first();o.addClass("active");if(e.small(i)){o.attr("style","")}else{o.css("padding-top",e.outerHeight(o.find(".title")))}}if(e.small(i)){s.attr("style","")}else{s.css("padding-top",e.outerHeight(s.find(".title")))}e.position_titles(i);if(e.is_horizontal(i)&&!e.small(i)){e.position_content(i)}else{e.position_content(i,false)}})},is_vertical:function(t){return/vertical-nav/i.test(t.data("section"))},is_horizontal:function(t){return/horizontal-nav/i.test(t.data("section"))},is_accordion:function(t){return/accordion/i.test(t.data("section"))},is_tabs:function(t){return/tabs/i.test(t.data("section"))},set_active_from_hash:function(){var e=i.location.hash.substring(1),s=t("[data-section]"),n=this;s.each(function(){var i=t(this),s=t.extend({},n.settings,n.data_options(i));if(e.length>0&&s.deep_linking){i.find("section, .section").attr("style","").removeClass("active");i.find('.content[data-slug="'+e+'"]').closest("section, .section").addClass("active")}})},position_titles:function(i,e){var s=i.find(".title"),n=0,o=this;if(typeof e==="boolean"){s.attr("style","")}else{s.each(function(){t(this).css("left",n);n+=o.outerWidth(t(this))})}},position_content:function(i,e){var s=i.find(".title"),n=i.find(".content"),o=this;if(typeof e==="boolean"){n.attr("style","");i.attr("style","")}else{i.find("section, .section").each(function(){var i=t(this).find(".title"),e=t(this).find(".content");e.css({left:i.position().left-1,top:o.outerHeight(i)-2})});if(typeof Zepto==="function"){i.height(this.outerHeight(s.first()))}else{i.height(this.outerHeight(s.first())-2)}}},small:function(i){var e=t.extend({},this.settings,this.data_options(i));if(this.is_tabs(i)){return false}if(i&&this.is_accordion(i)){return true}if(t("html").hasClass("lt-ie9")){return true}if(t("html").hasClass("ie8compat")){return true}return t(this.scope).width()<768},off:function(){t(this.scope).off(".fndtn.section");t(i).off(".fndtn.section");t(e).off(".fndtn.section")}}})(Foundation.zj,this,this.document);