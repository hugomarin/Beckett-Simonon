(function(t,s,i,e){"use strict";Foundation.libs.topbar={name:"topbar",version:"4.0.0",settings:{index:0,stickyClass:"sticky",custom_back_text:true,back_text:"Back",init:false},init:function(i,e,n){var a=this;this.scope=i||this.scope;if(typeof e==="object"){t.extend(true,this.settings,e)}if(typeof e!="string"){t(".top-bar").each(function(){a.settings.$w=t(s);a.settings.$topbar=t(this);a.settings.$section=a.settings.$topbar.find("section");a.settings.$titlebar=a.settings.$topbar.children("ul").first();a.settings.$topbar.data("index",0);var i=t("<div class='top-bar-js-breakpoint'/>").insertAfter(a.settings.$topbar);a.settings.breakPoint=i.width();i.remove();a.assemble();if(a.settings.$topbar.parent().hasClass("fixed")){t("body").css("padding-top",a.outerHeight(a.settings.$topbar))}});if(!a.settings.init){this.events()}return this.settings.init}else{return this[e].call(this,n)}},events:function(){var i=this;var e=this.outerHeight(t(".top-bar"));t(this.scope).on("click.fndtn.topbar",".top-bar .toggle-topbar",function(n){var a=t(this).closest(".top-bar"),o=a.find("section, .section"),r=a.children("ul").first();if(!a.data("height"))i.largestUL();n.preventDefault();if(i.breakpoint()){a.toggleClass("expanded").css("min-height","")}if(!a.hasClass("expanded")){o.css({left:"0%"});o.find(">.name").css({left:"100%"});o.find("li.moved").removeClass("moved");a.data("index",0)}if(a.parent().hasClass("fixed")){a.parent().removeClass("fixed");t("body").css("padding-top","0");s.scrollTo(0,0)}else if(a.hasClass("fixed expanded")){a.parent().addClass("fixed");t("body").css("padding-top",e)}}).on("click.fndtn.topbar",".top-bar .has-dropdown>a",function(s){var e=t(this).closest(".top-bar"),n=e.find("section, .section"),a=e.children("ul").first();if(Modernizr.touch||i.breakpoint()){s.preventDefault()}if(i.breakpoint()){var o=t(this),r=o.closest("li");e.data("index",e.data("index")+1);r.addClass("moved");n.css({left:-(100*e.data("index"))+"%"});n.find(">.name").css({left:100*e.data("index")+"%"});o.siblings("ul").height(e.data("height")+i.outerHeight(a,true));e.css("min-height",e.data("height")+i.outerHeight(a,true)*2)}});t(s).on("resize.fndtn.topbar",function(){if(!this.breakpoint()){t(".top-bar").css("min-height","")}}.bind(this));t(this.scope).on("click.fndtn",".top-bar .has-dropdown .back",function(s){s.preventDefault();var i=t(this),e=i.closest(".top-bar"),n=e.find("section, .section"),a=i.closest("li.moved"),o=a.parent();e.data("index",e.data("index")-1);n.css({left:-(100*e.data("index"))+"%"});n.find(">.name").css({left:100*e.data("index")+"%"});if(e.data("index")===0){e.css("min-height",0)}setTimeout(function(){a.removeClass("moved")},300)})},breakpoint:function(){return t(s).width()<=this.settings.breakPoint||t("html").hasClass("lt-ie9")},assemble:function(){var s=this;this.settings.$section.detach();this.settings.$section.find(".has-dropdown>a").each(function(){var i=t(this),e=i.siblings(".dropdown"),n=t('<li class="title back js-generated"><h5><a href="#"></a></h5></li>');if(s.settings.custom_back_text==true){n.find("h5>a").html("&laquo; "+s.settings.back_text)}else{n.find("h5>a").html("&laquo; "+i.html())}e.prepend(n)});this.settings.$section.appendTo(this.settings.$topbar);this.sticky()},largestUL:function(){var s=this.settings.$topbar.find("section ul ul"),i=s.first(),e=0,n=this;s.each(function(){if(t(this).children("li").length>i.children("li").length){i=t(this)}});i.children("li").each(function(){e+=n.outerHeight(t(this),true)});this.settings.$topbar.data("height",e)},sticky:function(){var i="."+this.settings.stickyClass;if(t(i).length>0){var e=t(i).length?t(i).offset().top:0,n=t(s);var a=this.outerHeight(t(".top-bar"));n.scroll(function(){if(n.scrollTop()>=e){t(i).addClass("fixed");t("body").css("padding-top",a)}else if(n.scrollTop()<e){t(i).removeClass("fixed");t("body").css("padding-top","0")}})}},off:function(){t(this.scope).off(".fndtn.topbar");t(s).off(".fndtn.topbar")}}})(Foundation.zj,this,this.document);